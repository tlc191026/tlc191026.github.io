# 加密相册使用说明

## 如何使用加密图片功能

### 第一步：加密图片

运行加密工具脚本：

```bash
cd tools
node encrypt-images.js --password "你的密码" --input "../img/travel/UK" --output "../docs/encrypted-images/travel/UK"
```

脚本会：
1. 加密所有图片文件
2. 生成 `.enc.json` 加密文件
3. 输出密码Hash（需要记录下来）

### 第二步：设置密码Hash

将脚本输出的密码Hash复制到 `docs/javascripts/image-crypto.js` 文件中的 `PASSWORD_HASH` 变量：

```javascript
let PASSWORD_HASH = '这里粘贴密码Hash';
```

### 第三步：在相册页面中使用加密图片

将原来的图片引用：

```html
<img src="https://raw.githubusercontent.com/.../photo.jpg" alt="描述">
```

改为加密引用：

```html
<img data-encrypted="../encrypted-images/travel/UK/photo.enc.json" alt="描述">
```

### 示例页面

以下是一个完整的加密相册页面示例：

```markdown
# 私密相册

访问此页面需要密码。

<div style="text-align:center">
  <img data-encrypted="../encrypted-images/travel/UK/2023.7.3-首都机场.enc.json" alt="首都机场合影" style="max-width:40%; display:inline-block">
</div>
```

## 注意事项

1. **密码安全**：请妥善保管密码，丢失后无法恢复
2. **安全性说明**：此加密方案适合防止普通用户直接访问图片，但不能阻止专业攻击
3. **缓存机制**：解密后的图片会在当前浏览器会话中缓存，关闭浏览器后需要重新输入密码
4. **首次使用**：建议先用少量图片测试，确认功能正常后再批量加密

## 完整工作流程

1. 准备原始图片放在 `img/` 目录
2. 运行加密脚本生成加密文件
3. 更新 `PASSWORD_HASH`
4. 修改相册页面使用 `data-encrypted` 属性
5. 本地测试：`mkdocs serve`
6. 确认无误后部署：`mkdocs gh-deploy`
